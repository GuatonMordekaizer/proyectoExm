{% extends 'base.html' %}

{% block title %}Crear Paciente{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col-12">
            <h2><i class="bi bi-person-plus"></i> Registrar Nueva Paciente</h2>
        </div>
    </div>

    <div class="card shadow">
        <div class="card-body">
            <form method="post">
                {% csrf_token %}

                {% if form.errors %}
                <div class="alert alert-danger">
                    Por favor corrija los errores en el formulario.
                </div>
                {% endif %}

                <h5 class="card-title text-primary border-bottom pb-2 mb-3">Identificación</h5>
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <label class="form-label">RUT</label>
                        {{ form.rut }}
                        {% if form.rut.errors %}
                        <div class="text-danger small">{{ form.rut.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Nombre</label>
                        {{ form.nombre }}
                        {% if form.nombre.errors %}
                        <div class="text-danger small">{{ form.nombre.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Apellido Paterno</label>
                        {{ form.apellido_paterno }}
                        {% if form.apellido_paterno.errors %}
                        <div class="text-danger small">{{ form.apellido_paterno.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Apellido Materno</label>
                        {{ form.apellido_materno }}
                        {% if form.apellido_materno.errors %}
                        <div class="text-danger small">{{ form.apellido_materno.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>

                <h5 class="card-title text-primary border-bottom pb-2 mb-3">Datos Demográficos</h5>
                <div class="row g-3 mb-4">
                    <div class="col-md-4">
                        <label class="form-label">Fecha Nacimiento</label>
                        {{ form.fecha_nacimiento }}
                        {% if form.fecha_nacimiento.errors %}
                        <div class="text-danger small">{{ form.fecha_nacimiento.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Estado Civil</label>
                        {{ form.estado_civil }}
                        {% if form.estado_civil.errors %}
                        <div class="text-danger small">{{ form.estado_civil.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Escolaridad</label>
                        {{ form.escolaridad }}
                        {% if form.escolaridad.errors %}
                        <div class="text-danger small">{{ form.escolaridad.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Previsión</label>
                        {{ form.prevision }}
                        {% if form.prevision.errors %}
                        <div class="text-danger small">{{ form.prevision.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Teléfono</label>
                        {{ form.telefono }}
                        {% if form.telefono.errors %}
                        <div class="text-danger small">{{ form.telefono.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4 pt-4">
                        <div class="form-check">
                            {{ form.pueblo_originario }}
                            <label class="form-check-label">Pueblo Originario</label>
                        </div>
                        {% if form.pueblo_originario.errors %}
                        <div class="text-danger small">{{ form.pueblo_originario.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>

                <h5 class="card-title text-primary border-bottom pb-2 mb-3">Ubicación</h5>
                <div class="row g-3 mb-4">
                    <div class="col-md-6">
                        <label class="form-label">Dirección</label>
                        {{ form.direccion }}
                        {% if form.direccion.errors %}
                        <div class="text-danger small">{{ form.direccion.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Comuna</label>
                        {{ form.comuna }}
                        {% if form.comuna.errors %}
                        <div class="text-danger small">{{ form.comuna.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Región</label>
                        {{ form.region }}
                        {% if form.region.errors %}
                        <div class="text-danger small">{{ form.region.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Consultorio de Origen</label>
                        {{ form.consultorio_origen }}
                        <small class="form-text text-muted">Consultorio APS de origen</small>
                        {% if form.consultorio_origen.errors %}
                        <div class="text-danger small">{{ form.consultorio_origen.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{% url 'buscar_paciente' %}" class="btn btn-secondary me-md-2">Cancelar</a>
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="bi bi-save"></i> Guardar Paciente
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}