{% extends 'reportes/pdf/base_pdf.html' %}

{% block title %}Clasificación Robson{% endblock %}
{% block header_title %}Análisis de Clasificación de Robson{% endblock %}

{% block content %}
<div class="section-title">Resumen General</div>

<div class="stats-grid">
    <div class="stat-item">
        <div class="stat-value">{{ total_partos }}</div>
        <div class="stat-label">Total Partos</div>
    </div>
    <div class="stat-item">
        <div class="stat-value">{{ total_cesareas }}</div>
        <div class="stat-label">Total Cesáreas</div>
    </div>
    <div class="stat-item">
        <div class="stat-value">{{ tasa_cesarea_global }}%</div>
        <div class="stat-label">Tasa Global de Cesáreas</div>
    </div>
    <div class="stat-item">
        <div class="stat-value">{{ grupos|length }}</div>
        <div class="stat-label">Grupos Activos</div>
    </div>
</div>

<div class="section-title">Distribución por Grupo Robson</div>

<table>
    <tr>
        <th>Grupo</th>
        <th style="text-align: center;">Total Partos</th>
        <th style="text-align: center;">Cesáreas</th>
        <th style="text-align: center;">% del Total</th>
        <th style="text-align: center;">Tasa Cesárea</th>
        <th>Clasificación</th>
    </tr>
    {% for grupo in grupos %}
    <tr>
        <td><strong>Grupo {{ grupo.grupo_robson }}</strong></td>
        <td style="text-align: center;">{{ grupo.total }}</td>
        <td style="text-align: center;">{{ grupo.cesareas }}</td>
        <td style="text-align: center;">{{ grupo.porcentaje }}%</td>
        <td style="text-align: center;">
            {% if grupo.tasa_cesarea < 25 %}
            <span class="badge badge-success">{{ grupo.tasa_cesarea }}%</span>
            {% elif grupo.tasa_cesarea < 50 %}
            <span class="badge badge-warning">{{ grupo.tasa_cesarea }}%</span>
            {% else %}
            <span class="badge badge-danger">{{ grupo.tasa_cesarea }}%</span>
            {% endif %}
        </td>
        <td style="font-size: 8pt;">
            {% if grupo.grupo_robson == 1 %}Nulíparas, único cefálico, ≥37 sem, trabajo parto espontáneo
            {% elif grupo.grupo_robson == 2 %}Nulíparas, único cefálico, ≥37 sem, inducido/cesárea antes trabajo
            {% elif grupo.grupo_robson == 3 %}Multíparas, único cefálico, ≥37 sem, trabajo parto espontáneo
            {% elif grupo.grupo_robson == 4 %}Multíparas, único cefálico, ≥37 sem, inducido/cesárea antes trabajo
            {% elif grupo.grupo_robson == 5 %}Multíparas con cesárea previa, único cefálico, ≥37 sem
            {% elif grupo.grupo_robson == 6 %}Todas nulíparas podálicas
            {% elif grupo.grupo_robson == 7 %}Todas multíparas podálicas
            {% elif grupo.grupo_robson == 8 %}Embarazos múltiples
            {% elif grupo.grupo_robson == 9 %}Todas situaciones transversas u oblicuas
            {% elif grupo.grupo_robson == 10 %}Únicos cefálicos, <37 sem
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>

<div class="section-title">Observaciones</div>

<div class="info-box">
    <p><strong>Grupos de bajo riesgo (1, 3):</strong> Representan partos de bajo riesgo donde la tasa de cesárea debería ser mínima.</p>
    <p><strong>Grupo 5:</strong> Multíparas con cesárea previa - evaluar indicaciones para VBAC (parto vaginal después de cesárea).</p>
    <p><strong>Grupos 6-10:</strong> Situaciones de mayor complejidad donde tasas más altas pueden estar justificadas.</p>
</div>
{% endblock %}
